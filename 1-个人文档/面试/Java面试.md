### æ ‡è¯†ç¬¦å’Œå…³é”®å­—çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ
åœ¨æˆ‘ä»¬ç¼–å†™ç¨‹åºçš„æ—¶å€™ï¼Œéœ€è¦å¤§é‡åœ°ä¸ºç¨‹åºã€ç±»ã€å˜é‡ã€æ–¹æ³•ç­‰å–åå­—ï¼Œäºæ˜¯å°±æœ‰äº† **æ ‡è¯†ç¬¦** ã€‚ç®€å•æ¥è¯´ï¼Œ **æ ‡è¯†ç¬¦å°±æ˜¯ä¸€ä¸ªåå­—** ã€‚
æœ‰ä¸€äº›æ ‡è¯†ç¬¦ï¼ŒJava è¯­è¨€å·²ç»èµ‹äºˆäº†å…¶ç‰¹æ®Šçš„å«ä¹‰ï¼Œåªèƒ½ç”¨äºç‰¹å®šçš„åœ°æ–¹ï¼Œè¿™äº›ç‰¹æ®Šçš„æ ‡è¯†ç¬¦å°±æ˜¯ **å…³é”®å­—** ã€‚ç®€å•æ¥è¯´ï¼Œ**å…³é”®å­—æ˜¯è¢«èµ‹äºˆç‰¹æ®Šå«ä¹‰çš„æ ‡è¯†ç¬¦** ã€‚æ¯”å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦å¼€ä¸€å®¶åº—ï¼Œåˆ™è¦ç»™è¿™ä¸ªåº—èµ·ä¸€ä¸ªåå­—ï¼Œèµ·çš„è¿™ä¸ªâ€œåå­—â€å°±å«æ ‡è¯†ç¬¦ã€‚ä½†æ˜¯æˆ‘ä»¬åº—çš„åå­—ä¸èƒ½å«â€œè­¦å¯Ÿå±€â€ï¼Œå› ä¸ºâ€œè­¦å¯Ÿå±€â€è¿™ä¸ªåå­—å·²ç»è¢«èµ‹äºˆäº†ç‰¹æ®Šçš„å«ä¹‰ï¼Œè€Œâ€œè­¦å¯Ÿå±€â€å°±æ˜¯æˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­çš„å…³é”®å­—ã€‚

### å¯¹è±¡çš„ç›¸ç­‰å’Œå¼•ç”¨ç›¸ç­‰çš„åŒºåˆ«
- å¯¹è±¡çš„ç›¸ç­‰ä¸€èˆ¬æ¯”è¾ƒçš„æ˜¯å†…å­˜ä¸­å­˜æ”¾çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ã€‚
    - æ³¨æ„ï¼šå¦‚æœä½ çš„ç±»é‡Œé¢æ²¡æœ‰é‡å†™equalsæ–¹æ³•ï¼Œé‚£ä¹ˆä»Objectç±»ä¸­ç»§æ‰¿çš„equalsæ–¹æ³•æ¯”è¾ƒçš„ä»ç„¶æ˜¯å¯¹è±¡æŒ‡å‘çš„å†…å­˜åœ°å€ï¼Œå¾—åˆ°çš„ç»“æœä»ç„¶æ˜¯falseã€‚æ‰€ä»¥ï¼Œå¦‚æœè¦æ¯”è¾ƒå¯¹è±¡çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œè¦åœ¨ç±»ä¸­é‡å†™equalsæ–¹æ³•è¿›è¡Œæ¯”è¾ƒã€‚
- å¼•ç”¨ç›¸ç­‰ä¸€èˆ¬æ¯”è¾ƒçš„æ˜¯ä»–ä»¬æŒ‡å‘çš„å†…å­˜åœ°å€æ˜¯å¦ç›¸ç­‰ã€‚
- åœ¨Objectç±»ä¸­æœ‰ä¸€ä¸ªequalsæ–¹æ³•ç”¨äºæ¯”è¾ƒ 2 ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€æ˜¯å¦ç›¸ç­‰ï¼ŒString ç±»å¯¹è¯¥æ–¹æ³•è¿›è¡Œäº†é‡å†™ä»¥ç”¨äºæ¯”è¾ƒå­—ç¬¦ä¸²çš„å€¼æ˜¯å¦ç›¸ç­‰ã€‚
> [!NOTE] è¡¥å……ï¼šå¦‚ä½•é‡å†™equalsæ–¹æ³•
> é‡å†™ equals æ–¹æ³•çš„æ­¥éª¤å¦‚ä¸‹ï¼š
> 1. åœ¨ä½ çš„ç±»ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œä½¿ç”¨ public boolean equals(Object o) ä½œä¸ºæ–¹æ³•ç­¾åã€‚
> 2. åœ¨æ–¹æ³•ä½“å†…, åˆ¤æ–­å¦‚æœä¼ å…¥çš„å¯¹è±¡å’Œå½“å‰å¯¹è±¡æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆç›´æ¥è¿”å› true
> 3. åˆ¤æ–­ä¼ å…¥çš„å¯¹è±¡æ˜¯å¦ä¸º null, æˆ–è€…æ˜¯å¦æ˜¯åŒç±»å‹çš„å¯¹è±¡, å¦‚æœä¸æ˜¯è¿”å› false.
> 4. å°†ä¼ å…¥çš„å¯¹è±¡è½¬æ¢ä¸ºä½ çš„ç±»ç±»å‹çš„å¯¹è±¡
> 5. æ¯”è¾ƒä½ çš„ç±»çš„æ‰€æœ‰å…³é”®å±æ€§æ˜¯å¦ç›¸ç­‰.
> 6. è¿”å›æ¯”è¾ƒç»“æœ.
ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹:
```java
class Person {
    private String name;
    private int age;
    // constructor, getters and setters
    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;
        Person person = (Person) o;
        return age == person.age &&
               Objects.equals(name, person.name);
    }
}
```

### ç»§æ‰¿
ä¸åŒç±»å‹çš„å¯¹è±¡ï¼Œç›¸äº’ä¹‹é—´ç»å¸¸æœ‰ä¸€å®šæ•°é‡çš„å…±åŒç‚¹ã€‚ä¾‹å¦‚ï¼Œå°æ˜åŒå­¦ã€å°çº¢åŒå­¦ã€å°æåŒå­¦ï¼Œéƒ½å…±äº«å­¦ç”Ÿçš„ç‰¹æ€§ï¼ˆç­çº§ã€å­¦å·ç­‰ï¼‰ã€‚åŒæ—¶ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡è¿˜å®šä¹‰äº†é¢å¤–çš„ç‰¹æ€§ä½¿å¾—ä»–ä»¬ä¸ä¼—ä¸åŒã€‚ä¾‹å¦‚å°æ˜çš„æ•°å­¦æ¯”è¾ƒå¥½ï¼Œå°çº¢çš„æ€§æ ¼æƒ¹äººå–œçˆ±ï¼›å°æçš„åŠ›æ°”æ¯”è¾ƒå¤§ã€‚ç»§æ‰¿æ˜¯ä½¿ç”¨å·²å­˜åœ¨çš„ç±»çš„å®šä¹‰ä½œä¸ºåŸºç¡€å»ºç«‹æ–°ç±»çš„æŠ€æœ¯ï¼Œæ–°ç±»çš„å®šä¹‰å¯ä»¥å¢åŠ æ–°çš„æ•°æ®æˆ–æ–°çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ç”¨çˆ¶ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸èƒ½é€‰æ‹©æ€§åœ°ç»§æ‰¿çˆ¶ç±»ã€‚é€šè¿‡ä½¿ç”¨ç»§æ‰¿ï¼Œå¯ä»¥å¿«é€Ÿåœ°åˆ›å»ºæ–°çš„ç±»ï¼Œå¯ä»¥æé«˜ä»£ç çš„é‡ç”¨ï¼Œç¨‹åºçš„å¯ç»´æŠ¤æ€§ï¼ŒèŠ‚çœå¤§é‡åˆ›å»ºæ–°ç±»çš„æ—¶é—´ ï¼Œæé«˜æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ã€‚
**å…³äºç»§æ‰¿å¦‚ä¸‹ 3 ç‚¹è¯·è®°ä½ï¼š**
1.  å­ç±»æ‹¥æœ‰çˆ¶ç±»å¯¹è±¡æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼ˆåŒ…æ‹¬ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•ï¼‰ï¼Œä½†æ˜¯çˆ¶ç±»ä¸­çš„ç§æœ‰å±æ€§å’Œæ–¹æ³•å­ç±»æ˜¯æ— æ³•è®¿é—®ï¼Œ**åªæ˜¯æ‹¥æœ‰**ã€‚
2.  å­ç±»å¯ä»¥æ‹¥æœ‰è‡ªå·±å±æ€§å’Œæ–¹æ³•ï¼Œå³å­ç±»å¯ä»¥å¯¹çˆ¶ç±»è¿›è¡Œæ‰©å±•ã€‚
3.  å­ç±»å¯ä»¥ç”¨è‡ªå·±çš„æ–¹å¼å®ç°çˆ¶ç±»çš„æ–¹æ³•ã€‚ï¼ˆä»¥åä»‹ç»ï¼‰ã€‚

### æ¥å£å’ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆå…±åŒç‚¹å’ŒåŒºåˆ«ï¼Ÿ
**å…±åŒç‚¹** ï¼š
- éƒ½ä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚ 
- éƒ½å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•ã€‚
- éƒ½å¯ä»¥æœ‰é»˜è®¤å®ç°çš„æ–¹æ³•ï¼ˆJava 8 å¯ä»¥ç”¨ `default` å…³é”®å­—åœ¨æ¥å£ä¸­å®šä¹‰é»˜è®¤æ–¹æ³•ï¼‰ã€‚
**åŒºåˆ«** ï¼š
- æ¥å£ä¸»è¦ç”¨äºå¯¹ç±»çš„è¡Œä¸ºè¿›è¡Œçº¦æŸï¼Œä½ å®ç°äº†æŸä¸ªæ¥å£å°±å…·æœ‰äº†å¯¹åº”çš„è¡Œä¸ºã€‚æŠ½è±¡ç±»ä¸»è¦ç”¨äºä»£ç å¤ç”¨ï¼Œå¼ºè°ƒçš„æ˜¯æ‰€å±å…³ç³»ã€‚
- ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªç±»ï¼Œä½†æ˜¯å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚
- æ¥å£ä¸­çš„æˆå‘˜å˜é‡åªèƒ½æ˜¯ `public static final` ç±»å‹çš„ï¼Œä¸èƒ½è¢«ä¿®æ”¹ä¸”å¿…é¡»æœ‰åˆå§‹å€¼ï¼Œè€ŒæŠ½è±¡ç±»çš„æˆå‘˜å˜é‡é»˜è®¤ defaultï¼Œå¯åœ¨å­ç±»ä¸­è¢«é‡æ–°å®šä¹‰ï¼Œä¹Ÿå¯è¢«é‡æ–°èµ‹å€¼ã€‚

### æ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«äº†è§£å—-ä»€ä¹ˆæ˜¯å¼•ç”¨æ‹·è´
![[Pasted image 20230116213258.png]]
å‡å¦‚æœ‰ä¸ªPersonç±»ï¼Œæµ…æ‹·è´ï¼Œä¼šåœ¨å †ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„Personå¯¹è±¡ã€‚å¦‚æœPersonå¯¹è±¡ä¸­æœ‰ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å‚æ•°ï¼ˆAddressï¼‰ï¼Œåˆ™æµ…æ‹·è´ä¼šå…±ç”¨åŒä¸€ä¸ªAddresså¯¹è±¡ï¼Œæ·±æ‹·è´ä¼šæ–°å»ºä¸€ä¸ªAddresså¯¹è±¡ã€‚
å…³äºæ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«ï¼Œæˆ‘è¿™é‡Œå…ˆç»™ç»“è®ºï¼š
- **æµ…æ‹·è´**ï¼šæµ…æ‹·è´ä¼šåœ¨å †ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡åŒºåˆ«äºå¼•ç”¨æ‹·è´çš„ä¸€ç‚¹ï¼‰ï¼Œä¸è¿‡ï¼Œå¦‚æœåŸå¯¹è±¡å†…éƒ¨çš„å±æ€§æ˜¯å¼•ç”¨ç±»å‹çš„è¯ï¼Œæµ…æ‹·è´ä¼šç›´æ¥å¤åˆ¶å†…éƒ¨å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œä¹Ÿå°±æ˜¯è¯´æ‹·è´å¯¹è±¡å’ŒåŸå¯¹è±¡å…±ç”¨åŒä¸€ä¸ªå†…éƒ¨å¯¹è±¡ã€‚
- **æ·±æ‹·è´** ï¼šæ·±æ‹·è´ä¼šå®Œå…¨å¤åˆ¶æ•´ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬è¿™ä¸ªå¯¹è±¡æ‰€åŒ…å«çš„å†…éƒ¨å¯¹è±¡ï¼Œå³ä¸¤ä¸ªå¯¹è±¡æ¯«æ— å…³ç³»ã€‚
- **å¼•ç”¨æ‹·è´**ï¼šå¼•ç”¨æ‹·è´åœ¨å †ä¸­åªæœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œä¸åŒçš„å˜é‡åæŒ‡å‘å †ä¸­ç›¸åŒçš„å¯¹è±¡ã€‚
> å®ç°æµ…æ‹·è´ï¼ˆä½¿ç”¨cloneï¼‰
```java 
public class Address implements Cloneable{  
    private String name;  
    // çœç•¥æ„é€ å‡½æ•°ã€Getter&Setteræ–¹æ³•  
    @Override  
    public Address clone() {  
        try {  
            return (Address) super.clone();  
        } catch (CloneNotSupportedException e) {  
            throw new AssertionError();  
        }  
    }}  
public class Person implements Cloneable {  
    private Address address;  
    // çœç•¥æ„é€ å‡½æ•°ã€Getter&Setteræ–¹æ³•  
    @Override  
    public Person clone() {  
        try {  
            Person person = (Person) super.clone();  
            return person;  
        } catch (CloneNotSupportedException e) {  
            throw new AssertionError();  
        }  
    }}
```
> å®ç°æ·±æ‹·è´ï¼ˆä½¿ç”¨cloneï¼‰
```java
@Override  
public Person clone() {  
    try {  
        Person person = (Person) super.clone();  
        person.setAddress(person.getAddress().clone());  
        return person;  
    } catch (CloneNotSupportedException e) {  
        throw new AssertionError();  
    }  
}
```
> [!Warining] ä½¿ç”¨cloneå®ç°æµ…æ‹·è´å’Œæ·±æ‹·è´æ—¶ï¼Œè¦åœ¨ç±»ä¸Šå®ç°Cloneableæ¥å£

### String ä¸ºä»€ä¹ˆæ˜¯ä¸å¯å˜çš„?
`String` ç±»ä¸­ä½¿ç”¨ `final` å…³é”®å­—ä¿®é¥°å­—ç¬¦æ•°ç»„æ¥ä¿å­˜å­—ç¬¦ä¸²ï¼Œ~~æ‰€ä»¥`String` å¯¹è±¡æ˜¯ä¸å¯å˜çš„ã€‚~~
```Java
public final class String implements java.io.Serializable, Comparable<String>, CharSequence {
    private final char value[];
	//...
}
```

> ğŸ› ä¿®æ­£ ï¼š æˆ‘ä»¬çŸ¥é“è¢« `final` å…³é”®å­—ä¿®é¥°çš„ç±»ä¸èƒ½è¢«ç»§æ‰¿ï¼Œä¿®é¥°çš„æ–¹æ³•ä¸èƒ½è¢«é‡å†™ï¼Œä¿®é¥°çš„å˜é‡æ˜¯åŸºæœ¬æ•°æ®ç±»å‹åˆ™å€¼ä¸èƒ½æ”¹å˜ï¼Œä¿®é¥°çš„å˜é‡æ˜¯å¼•ç”¨ç±»å‹åˆ™ä¸èƒ½å†æŒ‡å‘å…¶ä»–å¯¹è±¡ã€‚å› æ­¤ï¼Œ`final` å…³é”®å­—ä¿®é¥°çš„æ•°ç»„ä¿å­˜å­—ç¬¦ä¸²å¹¶ä¸æ˜¯ `String` ä¸å¯å˜çš„æ ¹æœ¬åŸå› ï¼Œå› ä¸ºè¿™ä¸ªæ•°ç»„ä¿å­˜çš„å­—ç¬¦ä¸²æ˜¯å¯å˜çš„ï¼ˆ`final` ä¿®é¥°å¼•ç”¨ç±»å‹å˜é‡çš„æƒ…å†µï¼‰ã€‚
> 
> `String` çœŸæ­£ä¸å¯å˜æœ‰ä¸‹é¢å‡ ç‚¹åŸå› ï¼š
> 
> 1.  ä¿å­˜å­—ç¬¦ä¸²çš„æ•°ç»„è¢« `final` ä¿®é¥°ä¸”ä¸ºç§æœ‰çš„ï¼Œå¹¶ä¸”`String` ç±»æ²¡æœ‰æä¾›/æš´éœ²ä¿®æ”¹è¿™ä¸ªå­—ç¬¦ä¸²çš„æ–¹æ³•ã€‚
> 2.  `String` ç±»è¢« `final` ä¿®é¥°å¯¼è‡´å…¶ä¸èƒ½è¢«ç»§æ‰¿ï¼Œè¿›è€Œé¿å…äº†å­ç±»ç ´å `String` ä¸å¯å˜ã€‚



